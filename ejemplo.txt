

Prop Usuario(Usuario){libros_Prestados};
Prop Libro(Libro);
Prop Prestamos(Usuario,Libro);// Relaciona un usuario con un libro prestado
Prop Disponible(Libro);
Prop Profesor(Usuario);
Accion PrestarLibro(X,Y):
"""
Entradas: X: Usuario, Y:Libro 
Descripción: Se le asignara al usuario X, el libro Y como prestamo
"""
	Condiciones: 
		U = Usuario(X); //Comprueba que el individuo X es un usuario
		OR(
			U.libros_Prestados < 3 ; // Los libros prestados deben ser menos que 3
			Profesor(X); // O el usuario es profesor, no tiene limite de libros
		); 
		Libro(Y ); //Comprueba que el individuo Y es un libro
		Disponible(Y); //Comprueba si el libro Y esta disponible
	Consecuencias: 
		U.libros_Prestados +=1; //Incrementa el numero de libros prestados
		DEL Disponible(Y);  //Elimina el libro como disponible
		Prestamos(X,Y); //Asigna al usuario el libro 
Accion DevolverLibro(X,Y):
"""
Entradas: X: Usuario, Y:Libro 
Descripción: Se le asignara al usuario X, el libro Y como prestamo
"""
	Condiciones: 
		U = Usuario(X); //No debería hacer falta, se debería poder averiguar X apartir de UsuarioLibros
		Libro(Y ); //Comprueba que el individuo Y es un libro
		NOT(Disponible(Y)); //Comprueba que el libro Y no esta disponible
	Consecuencias: 
		U.libros_Prestados -=1; //Decrementa el numero de libros prestados
		Disponible(Y); // Ya esta disponible
		DEL Prestamos(X,Y); //Elimina el registro del libro al usuario 

//Inicializacion
add Usuario(“nacho”){libros_Prestados=0};
add Profesor(“nacho”); // Nacho es profesor, no tiene limite de libros
add Usuario(“juan”){libros_Prestados=0};
add Libro(“El señor de los anillos”);
//add Libro(“El señor de los anillos”);
add Disponible(“El señor de los anillos”); // Marca como disponible
add Libro(“El Quijote”);
//add Libro(“El Quijote”);
add Disponible(“El Quijote”); // Marca como disponible
add Libro(“1984”);
//add Libro(“1984”);
add Disponible(“1984”); // Marca como disponible
add Libro(“Dune”);
//add Libro(“Dune”);
add Disponible(“Dune”); // Marca como disponible
//Test
Run PrestarLibro(“nacho”, “El señor de los anillos”);
Run PrestarLibro(“nacho”, “El Quijote”);
Run PrestarLibro(“nacho”, “1984”);
Run PrestarLibro(“nacho”, “Dune”); //No falla porque nacho es profesor y no tiene limite de libros
Run DevolverLibro(“nacho”, "El señor de los anillos”);
Run PrestarLibro(“nacho”, “Dune”); // ahora sí debe funcionar
Run PrestarLibro(“juan”, “El Quijote”) ;// Debe fallar, El Quijote ya esta prestado
Run DevolverLibro(“nacho”, “El Quijote”);
Run PrestarLibro(“juan”, “El Quijote”) ;// ahora si debe funcionar
