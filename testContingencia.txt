from system import System;

Prep Cliente(Cliente){edad=120};
Prep Producto(Producto){precio=0};
Accion Comprar(Cliente,Producto):
    Condiciones:
        P = Producto(Producto);
        C = Cliente(Cliente);
        A = P.precio;
    Consecuencias:
        System.print("Precio: {0} para el cliente {1}",A,C.Cliente);
    Contingencia Menor_Edad:
        Condiciones:
            C.edad < 18;
        Consecuencias:
            A -= 3;
            System.print("El cliente {0} es menor de edad y tiene un descuento del 100%",C.Cliente);
Accion MostrarUsuarios():
    Condiciones:
        U = Cliente(_);
    Consecuencias:
        System.print("Cliente: {0} con edad {1}",U.Cliente,U.edad);
    Contingencia edad:
        Condiciones:
            U2 = U;//Para no modificar U pues se comparte el contexto
            U2.edad > 20; //Filtra los menores de 20
        Consecuencias:
             System.print("Cliente: {0} es maryor que 20",U2.Cliente);
add Cliente("nacho");
add Cliente("nachoMayor"){edad=30};

add Producto("taza"){precio=15};
//Run MostrarUsuarios();
Run Comprar("nacho","taza");